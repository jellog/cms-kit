@page
@using Microsoft.AspNetCore.Mvc.Localization
@using DataGap.CmsKit.Localization
@model DataGap.CmsKit.Pro.Admin.Web.Pages.CmsKit.Newsletters.DetailModel
@inject IHtmlLocalizer<CmsKitResource> L

@{
    Layout = null;
}

@section scripts {
    <jellog-script src="/Pages/CmsKit/Newsletters/Detail.js"/>
}

<jellog-modal size="Large">
    <jellog-modal-header title="@L["Detail"].Value"></jellog-modal-header>

    <jellog-modal-body>
        <div class="mb-3">
            <small class="text-muted">@Model.NewsletterRecordWithDetailsDto.EmailAddress</small> -
            <small class="badge bg-primary">@Model.NewsletterRecordWithDetailsDto.CreationTime.ToShortDateString()</small>
        </div>

        <table class="table table-striped text-center">
            <thead>
            <tr>
                <th>@L["Preference"]</th>
                <th>@L["Source"]</th>
                <th>@L["SourceUrl"]</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var newsletter in Model.NewsletterRecordWithDetailsDto.Preferences)
            {
                <tr>
                    <td>
                        <span data-bs-toggle="tooltip" title="@newsletter.Preference">
                            @newsletter.Preference.TruncateWithPostfix(30)
                        </span>
                    </td>
                    <td>
                        <span data-bs-toggle="tooltip" title="@newsletter.Source">
                            @newsletter.Source.TruncateWithPostfix(30)
                        </span>
                    </td>
                    <td>
                        <span data-bs-toggle="tooltip" title="@newsletter.SourceUrl">
                            @newsletter.SourceUrl.TruncateWithPostfix(50)
                        </span>
                    </td>
                </tr>
            }
            </tbody>
        </table>
    </jellog-modal-body>
</jellog-modal>
